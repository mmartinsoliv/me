---
import Layout from '../layouts/Layout.astro';
import '../styles/global.css'
import { getCollection, type CollectionEntry } from 'astro:content';

interface ProjectItem {
  title: string;
  icon?: boolean;
  description: string;
  link: string;
}

interface WritingItem {
  title: string;
  description: string;
  link: string;
}

const building: WritingItem[] = [
  {
    title: "Craft",
    description: "Implementing interfaces and interactions.",
    link: "#"
  },
]

const projects: ProjectItem[] = [
  {
    title: "Easy Hooks",
    icon: true,
    description: "React hook library, ready to use, written in Typescript.",
    link: "https://github.com/mmartinsoliv/easy-hooks-ts"
  },
  {
    title: "React95",
    icon: true,
    description: "A React components library with Win95 UI.",
    link: "https://github.com/React95/React95"
  },
  {
    title: "Yoga",
    icon: true,
    description: "Yoga design-system",
    link: "https://github.com/gympass/yoga"
  }
];

const posts = await getCollection('blog');
const latestPosts = posts
  .sort((a: CollectionEntry<'blog'>, b: CollectionEntry<'blog'>) => new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime())
  .slice(0, 3);

const writing: WritingItem[] = latestPosts.map((post: CollectionEntry<'blog'>) => ({
  title: post.data.title,
  description: post.data.description,
  link: `/writing/${post.id}`
}));
---

<Layout title="Matheus Martins">
  <div class="max-w-4xl mx-auto px-6 sm:px-8 py-16 sm:py-24">
    <main class="space-y-16">

      <!-- Intro Section -->
      <section class="animate-section space-y-6">
        <h1 class="text-2xl font-medium text-white">Matheus Martins</h1>
        <p class="text-lg text-neutral-400">
          Crafting interfaces. Building polished software and web experiences. Experimenting with magical details in user interfaces. UI Engineer at <a href="https://vtex.com/en-us/" target="_blank" class="text-white hover:underline underline-offset-4">VTEX</a>.
        </p>
        <p class="text-lg text-neutral-400">
          In the past I've developed the <a href="#" class="text-white hover:underline underline-offset-4">Vercel design system</a>, website, and dashboard.
        </p>
      </section>

      <!-- Main Content Grid -->
      <section class="animate-section grid grid-cols-1 md:grid-cols-3 gap-12">
        <!-- Building Column -->
        <div class="space-y-8">
			<h2 class="text-neutral-500">Bulding</h2>
			 <div class="space-y-6">
			  {building.map((item: WritingItem) => (
				<a href={item.link} class="block group">
				  <h3 class="text-white font-medium">{item.title}</h3>
				  <p class="text-neutral-400">{item.description}</p>
				</a>
			  ))}
			</div>
		 </div>

        <div class="space-y-8">
          <h2 class="text-neutral-500">Projects</h2>
          <div class="space-y-6">
            {projects.map((project: ProjectItem) => (
              <a href={project.link} target="_blank" class="block group">
                <h3 class="text-white font-medium flex items-center gap-2">
                  {project.title}
                  {project.icon && (
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-neutral-500 group-hover:text-white transition-colors"><path d="M7 7h10v10"/><path d="M7 17 17 7"/></svg>
                  )}
                </h3>
                <p class="text-neutral-400">{project.description}</p>
              </a>
            ))}
          </div>
        </div>

        <div class="space-y-8">
          <h2 class="text-neutral-500">Writing</h2>
           <div class="space-y-6">
            {writing.map((item: WritingItem) => (
              <a href={item.link} class="block group">
                <h3 class="text-white font-medium">{item.title}</h3>
                <p class="text-neutral-400">{item.description}</p>
              </a>
            ))}
          </div>
        </div>
      </section>

      <!-- Now Section -->
      <section class="animate-section space-y-6">
        <h2 class="text-2xl font-medium text-white">Now</h2>
        <p class="text-lg text-neutral-400">
          Developing skill through doing, guiltlessly exploring passion and interests, imbuing quality. Mindful that <span class="text-white">everything around me is someone's life work.</span>
        </p>
         <p class="text-lg text-neutral-400">
			All I want to do is build websites. Typography, motion design, copywriting, performance—the web is an endless medium of opportunity and creativity of which I’ve only scratched the surface.
        </p>
		<p class="text-lg text-neutral-400">
			Enjoying deep, dark, boring dance music: songs that set the pace in the first ten seconds and maintain it for the next ten minutes. Deep is a curation of my favorites. Soothed by the inherent energy of drum and bass—Drum has my favorites.
		</p>
      </section>

	  <section class="animate-section space-y-6">
		<h2 class="text-2xl font-medium text-white">Connect</h2>
		<p class="text-lg text-neutral-400">
			Reach me at <a href="#" class="text-white hover:underline underline-offset-4">@mmartinsoliv</a></p>
		</p>	  
	  </section>
    </main>
  </div>

  <script>
    // Client-side script to handle the staggered animation
    document.addEventListener('DOMContentLoaded', () => {
      // Select all the sections you want to animate
      const sections = document.querySelectorAll('.animate-section');

      sections.forEach((section, index) => {
        (section as HTMLElement).classList.add('fade-in-up');
        (section as HTMLElement).style.animationDelay = `${index * 250}ms`;
      });
    });
  </script>
</Layout>